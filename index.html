<!doctype html>
<html>
<head>
<script src="http://inc.the.tl/underscore.js"></script>
<script src="index3.js"></script>
<script>

  a = {
    "name": "drew lesueur",
    'age': 27
  }
//k(a)("name", "Drew lesueur")

console.log("the original object is")
console.log(a)
oa = a
a = k(a)
console.log("the wrapped object is")
//console.log(a)

console.log("trying to get the name")
console.log(a("name")())



oa.log = function(obj, x) {
  console.log("the prop is" + obj[x])
}

console.log(a("age")())

a("log" , 'age')("log", 'name')


a("x=", '3')

a("log", 'x')
a("test")
console.log(oa)

console.log(a('meta')())

a("bind", "say_what", function(){
  console.log("WHAT")
})

a("trigger", "say_what")


a('bind', 'method_missing', function(){
  console.log("missing")
})


console.log(a('meta')())
a('meta')('x=', function(){})
console.log(a('meta')('.x')())

k.bind_before(k, "method_missing",
function(func, obj, info){
  console.log("say who")
  console.log(info)
  console.log(obj)
  meta = k.meta(obj)
  if (meta.type) {
    
    k.meta(obj).return_value =
    meta.type[info.key]
    meta.stop_propagation = true
  }
 

})

a('meta')('Drew=', 'lesueur')
a('meta')('type=', {'gunn': 1})


console.log(a("gunn")())

</script>
</head>
<body>
</body>
</html>

